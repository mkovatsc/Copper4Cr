<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width = device-width, initial-scale = 1">

	<title>Copper</title>
	
	<link rel="stylesheet" type="text/css" href="css/reset.css"/>
	<link rel="stylesheet" type="text/css" href="css/style.css"/>

	<script src="shared/namespace.js"></script>
	  
	<script src="shared/utils/TimeUtils.js"></script>
	<script src="shared/utils/StringUtils.js"></script>
	<script src="shared/utils/ByteUtils.js"></script>
	<script src="shared/utils/Settings.js"></script>
	<script src="shared/utils/JsonUtils.js"></script>

    <script src="shared/logging/Log.js"></script>
    <script src="shared/logging/ConsoleLogger.js"></script>

	<script src="shared/events/Event.js"></script>

	<script src="shared/coap/Constants.js"></script>
	<script src="shared/coap/CoapMessage.js"></script>
	<script src="shared/coap/CoapMessageType.js"></script>
	<script src="shared/coap/CoapMessageCode.js"></script>
	<script src="shared/coap/CoapMessageOptionHeader.js"></script>
	<script src="shared/coap/CoapMessageBlockOption.js"></script>
	<script src="shared/coap/CoapMessageOption.js"></script>
	<script src="shared/coap/CoapMessageContentFormat.js"></script>
	<script src="shared/coap/CoapMessageSerializer.js"></script>

	<script src="shared/endpoint/Port.js"></script>

	<script src="gui/OverlayAdapter.js"></script>
	<script src="gui/MessageLogAdapter.js"></script>
	<script src="gui/PacketHeaderAdapter.js"></script>
	<script src="gui/PacketOptionsAdapter.js"></script>
	<script src="gui/PayloadAdapter.js"></script>
	<script src="gui/ToolbarAdapter.js"></script>
	<script src="gui/ResourceViewAdapter.js"></script>
	<script src="gui/PopupWindowAdapter.js"></script>
	<script src="gui/DebugOptionsAdapter.js"></script>
	<script src="gui/ProfilesAdapter.js"></script>

	<script src="utils/Storage.js"></script>
	<script src="utils/Options.js"></script>
	<script src="utils/Payload.js"></script>
	<script src="utils/Profiles.js"></script>
	<script src="utils/ExtensionJsonUtils.js"></script>

	<script src="endpoint/CoapResourceHandler.js"></script>
	<script src="endpoint/ClientEndpoint.js"></script>
	<script src="endpoint/ClientPort.js"></script>

	<script src="Session.js"></script>

	<!-- Chrome Specific Overloads -->
	<script src="shared/endpoint/PortChrome.js"></script>
	<script src="utils/StorageChrome.js"></script>
	<script src="endpoint/CoapResourceHandlerChrome.js"></script>
	<script src="endpoint/ClientPortChrome.js"></script>

</head>
<body>
<div class="main-container">
	<div class="main-toolbar hbox">
		<div class="toolbar-item border-right">
			<button id="copper-toolbar-ping" type="button" title="Ping with empty message">
					<img src="skin/tool_ping.png"> Ping
			</button>
			<button id="copper-toolbar-discover" type="button" title="GET link-formats from the well-known URI (cached resources are displayed in red)">
	            <img src="skin/tool_discover.png"> Discover
			</button>
		</div>
		
		<div class="toolbar-item border-right">		
	        <button id="copper-toolbar-get" type="button">				
	            <img src="skin/tool_get.png"> GET
			</button>
			<button id="copper-toolbar-post" type="button">
					<img src="skin/tool_post.png"> POST
			</button>
			<button id="copper-toolbar-put" type="button">
					<img src="skin/tool_put.png"> PUT
			</button>
			<button id="copper-toolbar-delete" type="button">
					<img src="skin/tool_delete.png"> DELETE
			</button>
			<button id="copper-toolbar-observe" type="button" title="Subscribe to the resource"
				><img src="skin/tool_observe.png"> Observe
			</button>
		</div>
		
		<div class="toolbar-item-dropdown hbox">
            <div id="copper-toolbar-payload">
                <button class="copper-toolbar-dropdown-button" type="button">
					<p>Payload ▾</p>
                </button>

                <div class="dropdown-content vbox hidden">
                    <ul class="select-group vbox">
                        <li id="copper-toolbar-payload-mode-text" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Text</p>
                        </li>
                        <li id="copper-toolbar-payload-mode-file" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>File</p>
                        </li>
                    </ul>
					<div class="separation-line"></div>
                    <ul class="vbox">
                        <li id="copper-toolbar-payload-choose-file" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8203;</span>
                            </div>
                            <p>Choose File...</p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="toolbar-item-dropdown hbox">
            <div id="copper-toolbar-behavior">
                <button class="copper-toolbar-dropdown-button" type="button">
					<p>Behavior ▾</p>
			    </button>

                <div class="dropdown-content vbox hidden">
                    <ul class="select-group vbox">
                        <li id="copper-toolbar-behavior-request-con" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>CON requests</p>
                        </li>
                        <li id="copper-toolbar-behavior-request-non" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>NON requests</p>
                        </li>
                    </ul>

					<div class="separation-line"></div>

                    <ul class="single-element vbox">
                        <li id="copper-toolbar-behavior-retransmissions" class="dropdown-item hbox" title="Retransmit unconfirmed messages">
                            <div class="selection-icon hidden">
                                <span>&#10003;</span>
                            </div>
                            <p>Retransmissions</p>
                        </li>
                    </ul>
                    <ul class="single-element vbox">
                        <li id="copper-toolbar-behavior-duplicates" class="dropdown-item hbox" title="Do not increase MID">
                            <div class="selection-icon hidden">
                                <span>&#10003;</span>
                            </div>
                            <p>Send Duplicates</p>
                        </li>
                    </ul>

					<div class="separation-line"></div>

					<ul class="single-element vbox">
						<li id="copper-toolbar-behavior-display-unknown" class="dropdown-item hbox" title="Display messages with unknown tokens">
							<div class="selection-icon hidden">
								<span>&#10003;</span>
							</div>
							<p>Display unknown</p>
						</li>
					</ul>
					<ul class="single-element vbox">
						<li id="copper-toolbar-behavior-reject-unknown" class="dropdown-item hbox" title="Send a Reset for messages with unknown tokens">
							<div class="selection-icon hidden">
								<span>&#10003;</span>
							</div>
							<p>Reject unknown</p>
						</li>
					</ul>

					<div class="separation-line"></div>

					<ul class="single-element vbox">
						<li id="copper-toolbar-behavior-send-uri-host" class="dropdown-item hbox" title="Enable virtual hosts and send Uri-Host option">
							<div class="selection-icon hidden">
								<span>&#10003;</span>
							</div>
							<p>Send Uri-Host</p>
						</li>
					</ul>
					<ul class="single-element vbox">
						<li id="copper-toolbar-behavior-send-size1" class="dropdown-item hbox" title="Automatically indicate request representation size">
							<div class="selection-icon hidden">
								<span>&#10003;</span>
							</div>
							<p>Send auto Size1</p>
						</li>
					</ul>

                    <div class="separation-line"></div>

                    <ul class="select-group vbox">
                        <li id="copper-toolbar-behavior-block-size-0" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block late negotiation</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-16" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 16</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-32" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 32</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-64" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 64</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-128" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 128</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-256" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 256</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-512" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 512</p>
                        </li>
                        <li id="copper-toolbar-behavior-block-size-1024" class="dropdown-item hbox">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Block size 1024</p>
                        </li>
                    </ul>

                    <div class="separation-line"></div>

                    <ul class="single-element vbox">
                        <li id="copper-toolbar-behavior-token-observe" class="dropdown-item hbox" title="Enforce non-default Token option for observing">
                            <div class="selection-icon hidden">
                                <span>&#10003;</span>
                            </div>
                            <p>Observe Token</p>
                        </li>
                    </ul>

                    <div class="separation-line"></div>

                    <ul class="select-group vbox">
                        <li id="copper-toolbar-behavior-observe-lazy" class="dropdown-item hbox" title="Only remove subscription, send lazy RST later (can be used for MID matching at server)">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>Lazy Observe cancel</p>
                        </li>
                        <li id="copper-toolbar-behavior-observe-get" class="dropdown-item hbox" title="Send a GET without Observe option to notify server">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>GET Observe cancel</p>
                        </li>
                        <li id="copper-toolbar-behavior-observe-rst" class="dropdown-item hbox" title="Send a RST right away (does not work with MID matching as new MID is used)">
                            <div class="selection-icon hidden">
                                <span>&#8226;</span>
                            </div>
                            <p>RST Observe cancel</p>
                        </li>
                    </ul>

				</div>
            </div>
		</div>

		<div class="toolbar-item-dropdown hbox">
			<div id="copper-toolbar-profiles">
				<button class="copper-toolbar-dropdown-button" type="button">
					<p>Profiles ▾</p>
				</button>

				<div class="dropdown-content hbox hidden">
					<div class="vbox flex-filler" style="width: 160px;">
						<ul id="copper-toolbar-profiles-container" class="select-group vbox">
							<li id="copper-toolbar-profiles-standard" class="dropdown-item hbox" title="Default profile - All changes are automatically stored to this profile if selected">
								<div class="selection-icon hidden">
									<span>&#8226;</span>
								</div>
								<p>Standard Profile</p>
							</li>
						</ul>
						<div class="separation-line"></div>
						<ul class="single-element vbox">
							<li id="copper-toolbar-profiles-auto-store" class="dropdown-item hbox" title="Automatically store changes made to the currently selected profile">
								<div class="selection-icon hidden">
									<span>&#10003;</span>
								</div>
								<p>Auto store to Profile</p>
							</li>
						</ul>
						<ul class="vbox">
							<li id="copper-toolbar-profiles-store-current" class="dropdown-item hbox" title="Store changes made to the currently selected profile">
								<div class="selection-icon hidden">
									<span>&#8203;</span>
								</div>
								<p>Store to current Profile</p>
							</li>
						</ul>
						<div class="separation-line"></div>
						<ul class="vbox">
							<li id="copper-toolbar-profiles-manage" class="dropdown-item hbox">
								<div class="selection-icon hidden">
									<span>&#8203;</span>
								</div>
								<p>Manage Profiles...</p>
							</li>
						</ul>
					</div>
				</div>

			</div>
		</div>

		<div class="flex-filler"></div>

		<div style="display: flex; cursor: pointer;">
			<div id="copper-toolbar-log">
				<span id="copper-toolbar-log-event-symbol" style="font-size: 350%">&#x25A1</span>
				<div id="copper-toolbar-log-event-log" class="hidden">
					<p>asdf</p>
				</div>
			</div>

			<div id="copper-toolbar-preferences">
				<span style="font-size: 250%">≡</span>
			</div>
		</div>
	</div>

  <!-- MENU BAR DONE -->

	<div class="main-content vbox">
		<div class="hbox flex-filler">
			<div class="vbox flex-filler">
				<div class="main-content-top-box">
					<fieldset>
						<legend>Status</legend>
						<div class="hbox"><label id="status-label" class="flex-filler"></label></div>
					</fieldset>
				</div>
				<div class="hbox flex-filler">
				
					<div class="sidebar-left hbox">
						<div id="resource_tree" class="tree border_solid white flex-filler"></div>
					</div>
					
					<div class="vbox flex-filler">
						<div class="hbox center-box-top">
							<div id="copper-packet-header" class="table no-scroll">
								<div class="table-head">
									<span class="packet-header-element">Header</span>
									<span class="packet-header-value">Value</span>
								</div>
								<div class="table-body">
									<div class="table-body-row">
										<span class="packet-header-element">Type</span>
										<span id="copper-packet-header-type" class="packet-header-value"></span>
									</div>
									<div class="table-body-row">
										<span class="packet-header-element">Code</span>
										<span id="copper-packet-header-code" class="packet-header-value"></span>
									</div>
									<div class="table-body-row">
										<span class="packet-header-element">MID</span>
										<span id="copper-packet-header-mid" class="packet-header-value"></span>
									</div>
									<div class="table-body-row">
										<span class="packet-header-element">Token</span>
										<span id="copper-packet-header-token" class="packet-header-value"></span>
									</div>
								</div>
							</div>
							<div id="copper-packet-options" class="table">
								<div class="table-head">
									<span class="packet-option">
										Option
									</span><span class="packet-value">
										Value
									</span><span class="packet-raw">
										Raw
									</span>
								</div>
								<div class="table-head-scrollbar"></div>
								<div id="copper-packet-options-table" class="table-body">
								</div>
							</div>
						</div>
						<div class="center-box-bottom flex-filler">
							<h2>Payload</h2>
							<button id="copper-payload-btn-in" type="button">
								<img src="skin/payload_in.png"> Incoming
							</button>
							<button id="copper-payload-btn-rendered" type="button">
								<img src="skin/payload_rendered.png"> Rendered
							</button>
							<button id="copper-payload-btn-out" type="button">
								<img src="skin/payload_out.png"> Outgoing
							</button>
							<div class="pane white">
								<div id="copper-payload-tab-in" class="innerpane visible"></div>
								<div id="copper-payload-tab-rendered" class="innerpane hidden"></div>
								<textarea id="copper-payload-tab-out" class="innerpane hidden"></textarea>
							</div>
						</div>
					</div>
				
				</div>
			
			</div>
			<div id="sidebar" class="sidebar-right vbox">
				<div style="padding: 0px 10px 0px 10px; min-height: 35px; height: 35px;">
					<div class="checkbox">
						<label><input id="chk_debug_options" type="checkbox">
						Debug Control</label>
						<button id="reset_button">Reset</button>
					</div>
					
				</div>
				
				<div id="sidebar-debug-options" style="display: block; padding: 0 4px 0 10px; overflow-y: auto;">
					<div style="padding: 4px;">
						<div style="text-align: center;"><label>Token</label></div>
						<div class="flex hbox">
							<span class="flex hbox text-input-custom">
								<input class="flex str2Hex" type="text" id="debug_option_token" placeholder="use hex (0x..) or string">
								<span class="clear_text" title="Clear">&times;</span>
							</span>		
						</div>
						
						<div style="text-align: center;"><label style="padding-top: 2px; margin-bottom: 2px;">Request Options</label></div>
						<p>Accept</p>
						<div class="flex hbox dropdown">
							<select id="debug_option_accept" class="flex text-input-custom">
								<option></option>
							</select>
						</div>
						
						<p>Content-Format</p>
						<div class="flex hbox dropdown">
							<select id="debug_option_content_format" class="flex text-input-custom">
								<option></option>
							</select>
						</div>
						
						<div id="sidebar_block_options" class="hbox">
							<div class="vbox" style="flex: 3; margin-left: 0;">
								<p>Block1 (Req.)</p>
								<span class="hbox text-input-custom" title="Choose block size in Behavior menu">
									<input class="flex" type="text" id="debug_option_block1" placeholder="block no.">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		
								<p>Size1</p>
								<span class="hbox text-input-custom"><input class="flex" type="text" id="debug_option_size1" placeholder="total size"><span onclick="clearInputText('debug_option_size1')" title="Clear">&times;</span></span>		

							</div>
							
							<div class="vbox" style="flex: 3;">
								<p>Block2 (Res.)</p>
								<span class="hbox text-input-custom" title="Choose block size in Behavior menu">
									<input class="flex" type="text" id="debug_option_block2" placeholder="block no.">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		
								<p>Size2</p>
								<span class="hbox text-input-custom">
									<input class="flex" type="text" id="debug_option_size2" placeholder="total size">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		

							</div>
							
							<div class="checkbox flex vbox">
								<label style="margin-left: auto; margin-right: auto;" >Auto
								<input style="margin-left: 7px;" id="chk_debug_option_block_auto" type="checkbox" title="Automatically transmit all blocks"></label>
							</div>
						</div>
						
						<p>Observe</p>
						<div class="flex hbox">
							<span class="flex hbox text-input-custom">
								<input class="flex" type="text" id="debug_option_observe" placeholder="use integer">
								<span class="clear_text" title="Clear">&times;</span>
							</span>		
						</div>
						
						<p>ETag(s)</p>
						<div class="flex vbox multiple-options" id="debug_option_etags">
							<div class="flex hbox last-option-with-add">
								<img class="add-option-button" src="skin/collapsed.png">
								<span class="flex hbox text-input-custom">
									<input class="flex str2Hex" type="text"  placeholder="use hex (0x..) or string">
									<span class="clear_text" title="Clear">&times;</span>
								</span>
							</div>
						</div>
						
						<p>If-Match(s)</p>
						<div class="flex vbox multiple-options" id="debug_option_if_matchs">
							<div class="flex hbox last-option-with-add">
								<img class="add-option-button" src="skin/collapsed.png">
								<span class="flex hbox text-input-custom">
									<input class="flex str2Hex" type="text"  placeholder="use hex (0x..) or string">
									<span class="clear_text" title="Clear">&times;</span>
								</span>
							</div>
						</div>
						
						<div class="checkbox">
							<label><input id="debug_option_if_none_match" type="checkbox">
							If-None-Match</label>
						</div>
						
						<div class="hbox">
							<div class="flex">
								<p>Uri-Host</p>
								<span class="hbox text-input-custom">
									<input class="flex" type="text" id="debug_option_uri_host" placeholder="not set">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		
							</div>
							
							<div style="margin-left: 6px; width: 4em;">
								<p>Uri-Port</p>
								<span class="hbox text-input-custom">
									<input class="flex" type="text" id="debug_option_uri_port" placeholder="n/s">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		
							</div>
						</div>
						
						<p>Proxy-Uri</p>
						<div class="flex hbox">
							<span class="flex hbox text-input-custom">
								<input class="flex" type="text" id="debug_option_proxy_uri" placeholder="use absolute URI">
								<span class="clear_text" title="Clear">&times;</span>
							</span>		
						</div>
						
						<div class="checkbox">
							<label><input id="debug_option_proxy_scheme" type="checkbox">
							Use Proxy-Scheme option</label>
						</div>
						
						<div style="text-align: center;"><label>Response Options</label></div>
						
						<p>Max-Age</p>
						<div class="flex hbox">
							<span class="flex hbox text-input-custom">
								<input class="flex" type="text" id="debug_option_max_age" placeholder="use integer">
								<span class="clear_text" title="Clear">&times;</span>
							</span>		
						</div>

						<p>Location-Path</p>
						<div class="flex vbox multiple-options" id="debug_option_location_paths">
							<div class="flex hbox last-option-with-add">
								<img class="add-option-button" src="skin/collapsed.png">
								<span class="flex hbox text-input-custom">
									<input class="flex str2Hex" type="text"  placeholder="not set">
									<span class="clear_text" title="Clear">&times;</span>
								</span>
							</div>
						</div>

						<p>Location-Query</p>
						<div class="flex vbox multiple-options" id="debug_option_location_queries">
							<div class="flex hbox last-option-with-add">
								<img class="add-option-button" src="skin/collapsed.png">
								<span class="flex hbox text-input-custom">
									<input class="flex str2Hex" type="text"  placeholder="not set">
									<span class="clear_text" title="Clear">&times;</span>
								</span>
							</div>
						</div>
						
						<div style="text-align: center;"><label>Custom Options</label></div>

						<div class="hbox" id="debug_option_custom_option">
							<div style="flex: 1;">
								<p>Number</p>
								<span class="hbox text-input-custom">
									<input class="flex" type="text" id="debug_option_custom_number" placeholder="not set">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		
							</div>
							
							<div style="margin-left: 6px; flex: 2;">
								<p>Value</p>
								<span class="hbox text-input-custom">
									<input class="flex str2Hex" type="text" id="debug_option_custom_value" placeholder="hex (0x..) or string">
									<span class="clear_text" title="Clear">&times;</span>
								</span>		
							</div>
						</div>
						
					</div>
					
				</div>
					
			</div>
		</div>
		
		<div class="main-content-bottom-box">
			<h2>CoAP Message Log</h2>
			<div id="copper-coap-message-log" class="table vbox">
				<div class="table-head">
					<span class="coap-message-time">Time</span>
					<span class="coap-message-type">Type</span>
					<span class="coap-message-code">Code</span>
					<span class="coap-message-mid">MID</span>
					<span class="coap-message-token">Token</span>
					<span class="coap-message-options">Options</span>
					<span class="coap-message-payload">Payload</span>
				</div>
				<div class="table-head-scrollbar"></div>
				<div id="copper-coap-message-log-table" class="table-body">
				</div>
			</div>
		</div>
	</div>
</div>

<div id="popup-windows">

	<!-- Option window -->
	<div class="block_screen hidden">
		<div id="preferences-window" class="popup-container vbox">
			<label class="title">Copper (Cu) Preferences</label>

			<div class="vbox content">
				<fieldset>
					<legend>Appearance</legend>
				</fieldset>

				<fieldset>
					<legend>Debug</legend>
					<div class="checkbox">
						<label><input id="preferences-window-encode-utf-8" type="checkbox">
							Use UTF-8 encoding</label>
					</div>
					<div class="checkbox">
						<label><input id="preferences-window-plugtest" type="checkbox">
							Enable ETSI Plugtest menu</label>
					</div>
					<button id="preferences-window-clear-resource-cache">Clear resource cache</button>
					<button id="preferences-window-clear-payload-cache">Clear payload cache</button>
				</fieldset>
			<button class="close-button">OK</button>
			</div>
		</div>
	</div>

	<!-- Profiles window -->
	<div class="block_screen hidden">
		<div id="manage-profile-window" class="popup-container vbox">
			<label class="title">Manage Profiles</label>

			<div class="vbox content">
				<fieldset id="copper-profile-manager-container">
					<legend>Profiles</legend>


					<button id="profile-add">Add Profile with current Settings</button>

				</fieldset>

				<div class="hbox">
					<button id="profile-save-and-exit">Save and Exit</button>
					<button id="profile-cancel">Cancel</button>
				</div>

			</div>
		</div>
	</div>
</div>
</body>
</html>